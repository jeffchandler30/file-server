<!-- LINT.IfChange -->
<html>
  <head>
    <style>
      .video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 0;
        padding-bottom: 56.25%; /* 16:9 */
      }
  </style>
  </head>
  <body>
    <div id="player" class="video" frameborder="0"></div>
    </div>
    <script>

      // Set up iframes using API.
      const tag = document.createElement("script");

      let params = (new URL(document.location)).searchParams;
      let videoId = params.get("videoId");

      tag.src = "https://youtube.googleapis.com/iframe_api";
      const firstScriptTag = document.getElementsByTagName("script")[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      let player;
      function onYouTubeIframeAPIReady() {

        let defaultConfig = {
          videoId: videoId,
          width: "100%",
          playerVars: {
            autoplay: 1,
            controls: 0,
            playsinline: 1,
            hl: "en",
            modestbranding: 0,
            rel: 1,
            ps: "gac",
            //dashmpd: "https://manifest.googlevideo.com/api/manifest/dash/expire/1700271348/ei/dKRXZd2qEoTlir4PkO6FkAs/ip/2601:640:8800:4980:1cf4:dc8c:759d:67d8/id/3984000000000001/source/arts_and_culture/requiressl/yes/xpc/Eghoy9CdJnoBAQ%3D%3D/susc/gac/playback_host/rr5---sn-o097znsk.googlevideo.com/mh/N9/mm/31/mn/sn-o097znsk/ms/au/mv/m/mvi/5/pl/34/vprv/1/pacing/0/mt/1700242146/itag/0/sparams/expire,ei,ip,id,source,requiressl,xpc,susc,vprv,itag/sig/ANLwegAwRAIgWeBaPFy_19jyJkoMLkl5750wOhRb4WJhKGDJNarqvD8CIBKk25HH-I-yUyXvyq_HdWkeLDwZtsrCbRAuL6OuiNbM/lsparams/playback_host,mh,mm,mn,ms,mv,mvi,pl/lsig/AM8Gb2swRAIgfNX0ObGNtXlFR5kmV17CZe_-8YmGQ8Kb7hMpVKlZ9D0CIH53Yf_LvAYL3q8eOQmoYkGs71K-PHffTmvW-Lu4FjpT",
          },
          events: {
              'onReady': onPlayerReady,
              'onStateChange': onPlayerStateChange,
              'onError': onPlayerError
            }
        };

        console.log("createOrUpdatePlayer", defaultConfig)
        createOrUpdatePlayer(defaultConfig);
      }

      /**
       * Creates a new player or updates existing player using given player configs.
       * @param {obj} playerconfig used to pass configuration properties to the player.
       */
      function createOrUpdatePlayer(playerConfig) {
        if (!playerConfig) throw "player config can not be empty";

        const container = document.getElementById("player").parentNode;

        const newPlayer = document.createElement("div");
        newPlayer.setAttribute("id", "player");

        container.replaceChild(newPlayer, document.getElementById("player"));
    
        console.log("Creating new player", playerConfig)
        player = new YT.Player("player", playerConfig);
      }

      function onPlayerReady(event) {
        player.mute();
        player.loadVideoByPlayerVars({
            "dashmpd": "https://manifest.googlevideo.com/api/manifest/dash/expire/1700271348/ei/dKRXZd2qEoTlir4PkO6FkAs/ip/2601:640:8800:4980:1cf4:dc8c:759d:67d8/id/3984000000000001/source/arts_and_culture/requiressl/yes/xpc/Eghoy9CdJnoBAQ%3D%3D/susc/gac/playback_host/rr5---sn-o097znsk.googlevideo.com/mh/N9/mm/31/mn/sn-o097znsk/ms/au/mv/m/mvi/5/pl/34/vprv/1/pacing/0/mt/1700242146/itag/0/sparams/expire,ei,ip,id,source,requiressl,xpc,susc,vprv,itag/sig/ANLwegAwRAIgWeBaPFy_19jyJkoMLkl5750wOhRb4WJhKGDJNarqvD8CIBKk25HH-I-yUyXvyq_HdWkeLDwZtsrCbRAuL6OuiNbM/lsparams/playback_host,mh,mm,mn,ms,mv,mvi,pl/lsig/AM8Gb2swRAIgfNX0ObGNtXlFR5kmV17CZe_-8YmGQ8Kb7hMpVKlZ9D0CIH53Yf_LvAYL3q8eOQmoYkGs71K-PHffTmvW-Lu4FjpT",
            "videoId": "gac_video_id"
        })
      }

      function onPlayerError(event) {
      }

      function onPlayerStateChange(event) {
      }

    </script>
  </body>
</html>
<!-- LINT.ThenChange(//depot/google3/video/youtube/web/embedded_player/appspot/pfp_test_appspot/templates/iframe_api_demo.html) -->
